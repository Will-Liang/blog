(window.webpackJsonp=window.webpackJsonp||[]).push([[121],{521:function(t,a,s){"use strict";s.r(a);var e=s(2),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"模型数据处理-数据放入request域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模型数据处理-数据放入request域"}},[t._v("#")]),t._v(" 模型数据处理-数据放入Request域")]),t._v(" "),a("h3",{attrs:{id:"说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[t._v("#")]),t._v(" 说明")]),t._v(" "),a("p",[t._v("开发中，控制器/处理器中获取的数据如何放入 request 域，然后在前端(VUE/JSP/...)取出显示。")]),t._v(" "),a("p",[a("img",{staticStyle:{zoom:"80%"},attrs:{src:"/blog/springmvc/image-20220621165820820.png",alt:"image-20220621165820820"}}),a("img",{staticStyle:{zoom:"80%"},attrs:{src:"/blog/springmvc/image-20220621165826808.png",alt:"image-20220621165826808"}})]),t._v(" "),a("h3",{attrs:{id:"通过-httpservletrequest-放入-request-域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通过-httpservletrequest-放入-request-域"}},[t._v("#")]),t._v(" 通过 HttpServletRequest 放入 request 域")]),t._v(" "),a("h4",{attrs:{id:"创建-web-model-data-jsp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建-web-model-data-jsp"}},[t._v("#")]),t._v(" 创建 web\\model_data.jsp")]),t._v(" "),a("div",{staticClass:"language-jsp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('<%@ page contentType="text/html;charset=UTF-8" language="java" %>\n<html>\n<head>\n    <title>Title</title>\n</head>\n<body>\n<h1>添加主人信息</h1>\n<form action="vote/vote05" method="post">\n    主人号:<input type="text" name="id"><br>\n    主人名:<input type="text" name="name"><br>\n    宠物号:<input type="text" name="pet.id"><br>\n    宠物名:<input type="text" name="pet.name"><br>\n    <input type="submit" value="添加主人和宠物">\n</form>\n</body>\n</html>\n\n')])])]),a("h4",{attrs:{id:"修改-votehandler-java"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改-votehandler-java"}},[t._v("#")]),t._v(" 修改 VoteHandler.java")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * 1. 演示将提交的数据->springmvc封装到java对象->springmvc 会自动的将其放入到request域\n     * 2. 这样我们就可以在跳转到的页面取出数据.\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/vote05"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("test05")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Master")]),t._v(" master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//1. springmvc会自动把获取的model模型，放入到request域中，名字就是master")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//2. 也可以手动将master放入到request")]),t._v("\n        request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAttribute")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"address"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"beijing"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//3. 如果我们希望修改master的属性值")]),t._v("\n        master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nono"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//4. 分析一下springmvc默认存放对象到request域中,属性名是")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//   request域 ("master", master) 属性名是类名/类型名 首字母小写')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//返回到一个结果")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vote_ok"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"创建-web-web-inf-vote-ok-jsp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建-web-web-inf-vote-ok-jsp"}},[t._v("#")]),t._v(" 创建 web\\WEB-INF\\vote_ok.jsp")]),t._v(" "),a("div",{staticClass:"language-jsp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('<%@ page contentType="text/html;charset=UTF-8" language="java" %>\n<html>\n<head>\n    <title>Title</title>\n</head>\n<body>\n<h1>获取的的数据显示页面</h1>\n<hr>\n取出 request 域的数据 <br>\naddress: ${address}<br>\n主人名字= ${requestScope.master.name}\n主人信息= ${requestScope.master}\n宠物名字= ${requestScope.master.pet.name}\n\n</body>\n</html>\n')])])]),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"/blog/springmvc/image-20220621171536842.png",alt:"image-20220621171536842"}}),t._v(" "),a("h3",{attrs:{id:"通过请求的方法参数-map-string-object-放入-request-域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通过请求的方法参数-map-string-object-放入-request-域"}},[t._v("#")]),t._v(" 通过请求的方法参数 Map<String,Object> 放入 request 域")]),t._v(" "),a("h4",{attrs:{id:"修改-model-data-jsp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改-model-data-jsp"}},[t._v("#")]),t._v(" 修改 model_data.jsp")]),t._v(" "),a("div",{staticClass:"language-jsp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('<br/>\n<hr/>\n<h1>添加主人信息[测试 Map ]</h1>\n<form action="vote/vote06" method="post">\n    主人号:<input type="text" name="id"><br>\n    主人名:<input type="text" name="name"><br>\n    宠物号:<input type="text" name="pet.id"><br>\n    宠物名:<input type="text" name="pet.name"><br>\n    <input type="submit" value="添加主人和宠物">\n</form>\n')])])]),a("h4",{attrs:{id:"修改-votehandler-java-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改-votehandler-java-2"}},[t._v("#")]),t._v(" 修改 VoteHandler.java")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * 演示通过Map<String,Object> 设置数据到request域\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/vote06"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("test06")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Master")]),t._v(" master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" map"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"------test06-----"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//1. 需求是通过map对象，添加属性到request中")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//2. 原理分析：springmvc会遍历map，然后将map的k-v, 存放到request域")]),t._v("\n        map"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"address"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"zhengzhou"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//map.put("master", null);  //页面取不出来 master了')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//返回到一个结果")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vote_ok"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("img",{attrs:{src:"/blog/springmvc/image-20220621172406884.png",alt:"image-20220621172406884"}})]),t._v(" "),a("h3",{attrs:{id:"通过返回-modelandview-对象-实现-request-域数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通过返回-modelandview-对象-实现-request-域数据"}},[t._v("#")]),t._v(" 通过返回 ModelAndView 对象 实现 request 域数据")]),t._v(" "),a("h4",{attrs:{id:"修改-model-data-jsp-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改-model-data-jsp-2"}},[t._v("#")]),t._v(" 修改 model_data.jsp")]),t._v(" "),a("div",{staticClass:"language-jsp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('<br/>\n<hr/>\n<h1>添加主人信息[测试 ModelAndView]</h1>\n<form action="vote/vote06" method="post">\n    主人号:<input type="text" name="id"><br>\n    主人名:<input type="text" name="name"><br>\n    宠物号:<input type="text" name="pet.id"><br>\n    宠物名:<input type="text" name="pet.name"><br>\n    <input type="submit" value="添加主人和宠物">\n</form>\n')])])]),a("h4",{attrs:{id:"修改-votehandler-java-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改-votehandler-java-3"}},[t._v("#")]),t._v(" 修改 VoteHandler.java")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * 演示通过返回ModelAndView对象，将数据放入到request域\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/vote07"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ModelAndView")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("test07")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Master")]),t._v(" master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"----test07----"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ModelAndView")]),t._v(" modelAndView "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ModelAndView")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//放入属性到modelAndView对象")]),t._v("\n        modelAndView"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addObject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"address"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"shanghai"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//modelAndView.addObject("master", null);')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//可以把从数据库得到的数据->对象-》放入modelAndView[Service-dao-db]")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//这里指定跳转的视图名称")]),t._v("\n        modelAndView"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setViewName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vote_ok"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//返回结果")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" modelAndView"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("img",{attrs:{src:"/blog/springmvc/image-20220621173156933.png",alt:"image-20220621173156933"}})]),t._v(" "),a("h4",{attrs:{id:"注意事项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[t._v("#")]),t._v(" 注意事项")]),t._v(" "),a("ol",[a("li",[t._v('从本质看，请求响应的方法 return "xx"，是返回了一个字符串，其实本质是返回了一个 ModelAndView 对象，只是默认被封装起来的。')]),t._v(" "),a("li",[t._v("ModelAndView 即可以包含 model 数据，也可以包含视图信息。")]),t._v(" "),a("li",[t._v("ModelAndView 对象的 addObject 方法可以添加 key-val 数据，默认在 request 域中。")]),t._v(" "),a("li",[t._v("ModelAndView 对象 setView 方法可以指定视图名称。")])]),t._v(" "),a("h2",{attrs:{id:"模型数据处理-数据放入-session域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模型数据处理-数据放入-session域"}},[t._v("#")]),t._v(" 模型数据处理-数据放入 Session域")]),t._v(" "),a("h3",{attrs:{id:"说明-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#说明-2"}},[t._v("#")]),t._v(" 说明")]),t._v(" "),a("p",[t._v("开发中，控制器/处理器中获取的数据如何放入 session 域，然后在前端(VUE/JSP/...)取出显示。")]),t._v(" "),a("h3",{attrs:{id:"应用实例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#应用实例"}},[t._v("#")]),t._v(" 应用实例")]),t._v(" "),a("h4",{attrs:{id:"修改-model-data-jsp-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改-model-data-jsp-3"}},[t._v("#")]),t._v(" 修改 model_data.jsp")]),t._v(" "),a("div",{staticClass:"language-jsp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('<br/>\n<hr/>\n<h1>添加主人信息[测试 Session]</h1>\n<form action="vote/vote08" method="post">\n    主人号:<input type="text" name="id"><br>\n    主人名:<input type="text" name="name"><br>\n    宠物号:<input type="text" name="pet.id"><br>\n    宠物名:<input type="text" name="pet.name"><br>\n    <input type="submit" value="添加主人和宠物">\n</form>\n')])])]),a("h4",{attrs:{id:"修改-votehandler-java-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改-votehandler-java-4"}},[t._v("#")]),t._v(" 修改 VoteHandler.java")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * 演示如何将数据设置到session域中\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/vote08"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("test08")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Master")]),t._v(" master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpSession")]),t._v(" httpSession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"----test08----"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//master对象是默认放在request域")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//我们将master对象放入到session域")]),t._v("\n        httpSession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAttribute")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"master"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        httpSession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAttribute")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"attribute"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"guangzhou"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vote_ok"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//请求转发")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"修改-vote-ok-jsp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改-vote-ok-jsp"}},[t._v("#")]),t._v(" 修改 vote_ok.jsp")]),t._v(" "),a("div",{staticClass:"language-jsp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("<hr>\n取出 session 域的数据 <br>\naddress: ${sessionScope.address}<br>\n主人名字= ${sessionScope.master.name }\n主人信息= ${sessionScope.master}\n")])])]),a("p",[a("img",{attrs:{src:"/blog/springmvc/image-20220621174415573.png",alt:"image-20220621174415573"}})]),t._v(" "),a("h2",{attrs:{id:"modelattribute-实现-prepare-方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#modelattribute-实现-prepare-方法"}},[t._v("#")]),t._v(" @ModelAttribute 实现 prepare 方法")]),t._v(" "),a("h3",{attrs:{id:"说明-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#说明-3"}},[t._v("#")]),t._v(" 说明")]),t._v(" "),a("p",[t._v("开发中，有时需要使用某个前置方法(比如 prepareXxx()，方法名由程序员定)给目标方法准备一个模型对象。")]),t._v(" "),a("ol",[a("li",[t._v("@ModelAttribute 注解可以实现 这样的需求。")]),t._v(" "),a("li",[t._v("在某个方法上，增加了@ModelAttribute 注解后。")]),t._v(" "),a("li",[t._v("那么在调用该 Handler 的任何一个方法时，都会先调用这个方法。")])]),t._v(" "),a("h3",{attrs:{id:"应用实例-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#应用实例-2"}},[t._v("#")]),t._v(" 应用实例")]),t._v(" "),a("h4",{attrs:{id:"修改-votehandler-java-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改-votehandler-java-5"}},[t._v("#")]),t._v(" 修改 VoteHandler.java")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * 1. 当Handler的方法被标识 @ModelAttribute,就视为一个前置方法\n     * 2. 当调用该Handler的其它的方法时，都会先执行该前置方法\n     * 3. 类似我们前面Spring中AOP的前置通知[底层是AOP机制]\n     * 4. prepareModel前置方法，会切入到其它方法前执行..\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ModelAttribute")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("prepareModel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"prepareModel()-----完成准备工作-----"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("img",{attrs:{src:"/blog/springmvc/image-20220621175012264.png",alt:"image-20220621175012264"}})]),t._v(" "),a("h3",{attrs:{id:"modelattribute-最佳实践"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#modelattribute-最佳实践"}},[t._v("#")]),t._v(" @ModelAttribute 最佳实践")]),t._v(" "),a("ol",[a("li",[t._v("在修改前，在前置方法中从数据库查出这个用户。")]),t._v(" "),a("li",[t._v("在修改方法(目标方法)中，可以使用前置方法从数据库查询的用户。")]),t._v(" "),a("li",[t._v("如果表单中对用户的某个属性修改了，则以新的数据为准，如果没有修改，则以数据库的信息为准，比如：用户的某个属性不能修改，就保持原来的值。")])])])}),[],!1,null,null,null);a.default=n.exports}}]);