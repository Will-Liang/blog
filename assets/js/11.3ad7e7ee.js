(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{414:function(s,t,a){"use strict";a.r(t);var n=a(2),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[s._v("#")]),s._v(" 概述")]),s._v(" "),t("h3",{attrs:{id:"官网"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#官网"}},[s._v("#")]),s._v(" 官网")]),s._v(" "),t("p",[s._v("https://docs.docker.com/")]),s._v(" "),t("h3",{attrs:{id:"容器较为官方的解释"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#容器较为官方的解释"}},[s._v("#")]),s._v(" 容器较为官方的解释")]),s._v(" "),t("p",[s._v("一句话概括容器：容器就是将软件打包成标准化单元，以用于开发、交付和部署。")]),s._v(" "),t("p",[s._v("（1）容器镜像是轻量的、可执行的独立软件包 ，包含软件运行所需的所有内容：代码、运行时环境、系统工具、系统库和设置。")]),s._v(" "),t("p",[s._v("（2）容器化软件适用于基于 Linux 和 Windows 的应用，在任何环境中都能够始终如一地运行。")]),s._v(" "),t("p",[s._v("（3）容器赋予了软件独立性，使其免受外在环境差异（例如，开发和预演环境的差异）的影响，从而有助于减少团队间在相同基础设施上运行不同软件时的冲突。")]),s._v(" "),t("h3",{attrs:{id:"容器较为通俗的解释"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#容器较为通俗的解释"}},[s._v("#")]),s._v(" 容器较为通俗的解释")]),s._v(" "),t("p",[s._v("如果需要通俗地描述容器的话，我觉得容器就是一个存放东西的地方，就像书包可以装各种文具、衣柜可以放各种衣服、鞋架可以放各种鞋子一样。我们现在所说的容器存放的东西可能更偏向于应用比如网站、程序甚至是系统环境。")]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/docker/image-20220821172154001.png",alt:"image-20220821172154001"}})]),s._v(" "),t("h2",{attrs:{id:"docker的基本组成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker的基本组成"}},[s._v("#")]),s._v(" Docker的基本组成")]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/docker/image-20220821172852324.png",alt:"image-20220821172852324"}})]),s._v(" "),t("h3",{attrs:{id:"镜像-image"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#镜像-image"}},[s._v("#")]),s._v(" 镜像（image）")]),s._v(" "),t("p",[s._v("Docker 镜像就是一个只读的模板。 镜像可以用来创建 Docker 容器，一个镜像可以 创建很多容器。 它也相当于是一个 root 文件系统。比如官方镜像 centos:7 就包含了完整的一套 centos:7 最小系统的 root 文件系统。 相当于容器的“源代码”，docker 镜像文件类似 于 Java 的类模板，而 docker 容器实例类似于 java 中 new 出来的实例对象。")]),s._v(" "),t("p",[s._v("容器与镜像的关系类似于面向对象编程中的对象与类。")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("Docker")]),s._v(" "),t("th",[s._v("面向对象")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("容器")]),s._v(" "),t("td",[s._v("对象")])]),s._v(" "),t("tr",[t("td",[s._v("镜像")]),s._v(" "),t("td",[s._v("类")])])])]),s._v(" "),t("h3",{attrs:{id:"容器-container"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#容器-container"}},[s._v("#")]),s._v(" 容器（container）")]),s._v(" "),t("p",[s._v("可以把容器看做是一个简易版的 Linux 环境 （包括 root 用户权限、进程空间、用户空间和 网络空间等）和运行在其中的应用程序。")]),s._v(" "),t("h3",{attrs:{id:"仓库-repository"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#仓库-repository"}},[s._v("#")]),s._v(" 仓库（repository）")]),s._v(" "),t("p",[s._v("仓库（Repository）是集中存放镜像文件的场所。")]),s._v(" "),t("p",[s._v("仓库分为公开仓库（Public）和私有仓库 （Private）两种形式。")]),s._v(" "),t("p",[s._v("最大的公开仓库是 Docker Hub(https://hub.docker.com/)")]),s._v(" "),t("p",[s._v("存放了数量庞大的镜像供用户下载。国内的公 开仓库包括阿里云 、网易云等。")]),s._v(" "),t("h2",{attrs:{id:"docker安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker安装"}},[s._v("#")]),s._v(" Docker安装")]),s._v(" "),t("h3",{attrs:{id:"环境查看"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#环境查看"}},[s._v("#")]),s._v(" 环境查看")]),s._v(" "),t("p",[s._v("查看系统内核")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# uname -r")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.10")]),s._v(".0-862.el7.x86_64\n")])])]),t("p",[s._v("查看系统配置")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# uname -r")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.10")]),s._v(".0-862.el7.x86_64\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/os-release ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NAME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CentOS Linux"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("VERSION")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"7 (Core)"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"centos"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ID_LIKE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rhel fedora"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("VERSION_ID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"7"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PRETTY_NAME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CentOS Linux 7 (Core)"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ANSI_COLOR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0;31"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CPE_NAME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cpe:/o:centos:centos:7"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("HOME_URL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://www.centos.org/"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("BUG_REPORT_URL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://bugs.centos.org/"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CENTOS_MANTISBT_PROJECT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CentOS-7"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CENTOS_MANTISBT_PROJECT_VERSION")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"7"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("REDHAT_SUPPORT_PRODUCT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"centos"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("REDHAT_SUPPORT_PRODUCT_VERSION")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"7"')]),s._v("\n")])])]),t("h3",{attrs:{id:"_1-卸载旧的版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-卸载旧的版本"}},[s._v("#")]),s._v(" 1.卸载旧的版本")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("yum remove "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-client "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-client-latest "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-common "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-latest "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-latest-logrotate "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-logrotate "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-engine\n")])])]),t("h3",{attrs:{id:"_2-下载需要的安装包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-下载需要的安装包"}},[s._v("#")]),s._v(" 2.下载需要的安装包")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y yum-utils\n")])])]),t("h3",{attrs:{id:"_3-设置镜像的仓库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-设置镜像的仓库"}},[s._v("#")]),s._v(" 3.设置镜像的仓库")]),s._v(" "),t("p",[s._v("设置阿里云的Docker镜像仓库")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("yum-config-manager "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --add-repo "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo \n")])])]),t("h3",{attrs:{id:"_4-更新yum软件包索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-更新yum软件包索引"}},[s._v("#")]),s._v(" 4.更新yum软件包索引")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("yum makecache fast\n")])])]),t("h3",{attrs:{id:"_5-安装docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-安装docker"}},[s._v("#")]),s._v(" 5.安装docker")]),s._v(" "),t("p",[s._v("docker-ce 是社区版，docker-ee 企业版")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce docker-ce-cli containerd.io\n")])])]),t("h3",{attrs:{id:"_6-启动docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-启动docker"}},[s._v("#")]),s._v(" 6.启动Docker")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("systemctl start "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看当前版本号，是否启动成功")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" version\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置开机自启动")]),s._v("\nsystemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:"/blog/docker/image-20220821180013144.png",alt:"image-20220821180013144"}})]),s._v(" "),t("h3",{attrs:{id:"_7-测试helloworld"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-测试helloworld"}},[s._v("#")]),s._v(" 7.测试helloworld")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run hello-world\n")])])]),t("p",[t("img",{attrs:{src:"/blog/docker/image-20220821180436454.png",alt:"image-20220821180436454"}})]),s._v(" "),t("p",[s._v("查看下载的hello-world镜像")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker images")]),s._v("\nREPOSITORY    TAG       IMAGE ID       CREATED         SIZE\nhello-world   latest    feb5d9fea6a5   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" months ago   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(".3kB\n")])])]),t("h3",{attrs:{id:"卸载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#卸载"}},[s._v("#")]),s._v(" 卸载")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1. 卸载依赖")]),s._v("\nyum remove docker-ce docker-ce-cli containerd.io\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2. 删除资源  . /var/lib/docker是docker的默认工作路径")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf /var/lib/docker\n")])])]),t("h3",{attrs:{id:"配置阿里云镜像加速"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置阿里云镜像加速"}},[s._v("#")]),s._v(" 配置阿里云镜像加速")]),s._v(" "),t("p",[s._v("进入阿里云官网，搜索容器镜像服务"),t("code",[s._v("https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors")])]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/docker/image-20220822165533996.png",alt:"image-20220822165533996"}})]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /etc/docker\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" /etc/docker/daemon.json "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<-")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'EOF\'\n{\n  "registry-mirrors": ["https://1z6kznch.mirror.aliyuncs.com"]\n}\nEOF')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl daemon-reload\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:"/blog/docker/image-20220822165922285.png",alt:"image-20220822165922285"}})]),s._v(" "),t("h2",{attrs:{id:"docker容器运行流程和原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker容器运行流程和原理"}},[s._v("#")]),s._v(" Docker容器运行流程和原理")]),s._v(" "),t("h3",{attrs:{id:"启动流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动流程"}},[s._v("#")]),s._v(" 启动流程")]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/docker/image-20220822170059517-16611588604821.png",alt:"image-20220822170059517"}})]),s._v(" "),t("h3",{attrs:{id:"底层原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#底层原理"}},[s._v("#")]),s._v(" 底层原理")]),s._v(" "),t("p",[s._v("Docker是一个Client-Server结构的系统，Docker的守护进程运行在主机上，通过Socket从客户端访问！Docker Server接收到Docker-Client的指令，就会执行这个指令！")]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/docker/image-20220822170119655.png",alt:"image-20220822170119655"}})]),s._v(" "),t("p",[s._v("Docker为什么比VM Ware快？")]),s._v(" "),t("p",[s._v("1、Docker比虚拟机更少的抽象层")]),s._v(" "),t("p",[s._v("2、Focker利用宿主机的内核，VM需要的是Guest OS")]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/docker/image-20220822171239069.png",alt:"image-20220822171239069"}})]),s._v(" "),t("p",[s._v("Docker新建一个容器的时候，不需要像虚拟机一样重新加载一个操作系统内核，直接利用宿主机的操作系统，而虚拟机是需要加载Guest OS。Docker和VM的对比如下：")]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/docker/image-20220822171549489.png",alt:"image-20220822171549489"}})]),s._v(" "),t("h2",{attrs:{id:"docker的常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker的常用命令"}},[s._v("#")]),s._v(" Docker的常用命令")]),s._v(" "),t("h3",{attrs:{id:"帮助命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#帮助命令"}},[s._v("#")]),s._v(" 帮助命令")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" version          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看docker的版本信息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" info             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看docker的系统信息,包括镜像和容器的数量")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" 命令 --help       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#帮助命令(可查看可选的参数)")]),s._v("\n")])])]),t("p",[s._v("帮助文档地址：https://docs.docker.com/engine/reference/commandline/docker/")]),s._v(" "),t("h3",{attrs:{id:"镜像命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#镜像命令"}},[s._v("#")]),s._v(" 镜像命令")]),s._v(" "),t("p",[t("strong",[s._v("docker images")]),s._v(" 查看本地主机的所有镜像")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker images")]),s._v("\nREPOSITORY    TAG       IMAGE ID       CREATED         SIZE\nhello-world   latest    feb5d9fea6a5   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" months ago   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(".3kB\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#解释:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".REPOSITORY  镜像的仓库源\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".TAG  镜像的标签\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".IMAGE ID 镜像的id\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".CREATED 镜像的创建时间\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".SIZE 镜像的大小\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可选参数")]),s._v("\n\n-a/--all 列出所有镜像\n\n-q/--quiet 只显示镜像的id\n")])])]),t("p",[t("strong",[s._v("docker search")]),s._v(" 搜索镜像")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker search mysql")]),s._v("\nNAME                            DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED\nmysql                           MySQL is a widely used, open-source relation…   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13051")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("       \nmariadb                         MariaDB Server is a high performing "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v(" sou…   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4994")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("       \nphpmyadmin                      phpMyAdmin - A web interface "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" MySQL and M…   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("608")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("       \npercona                         Percona Server is a fork of the MySQL relati…   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("584")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("       \nbitnami/mysql                   Bitnami MySQL Docker Image                      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("75")]),s._v("                   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nlinuxserver/mysql-workbench                                                     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v("                   \nlinuxserver/mysql               A Mysql container, brought to you by LinuxSe…   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("37")]),s._v("                   \nubuntu/mysql                    MySQL "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" fast, stable, multi-thread…   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("36")]),s._v("                   \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#可选参数")]),s._v("\n\nSearch the Docker Hub "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" images\n\nOptions:\n  -f, --filter filter   Filter output based on conditions provided\n      --format string   Pretty-print search using a Go template\n      --limit int       Max number of search results "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      --no-trunc        Don't truncate output\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#搜索收藏数大于3000的镜像")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker search mysql --filter=STARS=3000")]),s._v("\nNAME      DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED\nmysql     MySQL is a widely used, open-source relation…   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13051")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("       \nmariadb   MariaDB Server is a high performing "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v(" sou…   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4994")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n")])])]),t("p",[t("strong",[s._v("docker pull 镜像名[:tag]")]),s._v(" 下载镜像")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker pull mysql")]),s._v("\nUsing default tag: latest            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#如果不写tag默认就是latest")]),s._v("\nlatest: Pulling from library/mysql\n6ec7b7d162b2: Pull complete          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#分层下载,docker image的核心-联合文件系统")]),s._v("\nfedd960d3481: Pull complete\n7ab947313861: Pull complete\n64f92f19e638: Pull complete\n3e80b17bff96: Pull complete\n014e976799f9: Pull complete\n59ae84fee1b3: Pull complete\nffe10de703ea: Pull complete\n657af6d90c83: Pull complete\n98bfb480322c: Pull complete\n6aa3859c4789: Pull complete\n1ed875d851ef: Pull complete\nDigest: sha256:78800e6d3f1b230e35275145e657b82c3fb02a27b2d8e76aac2f5e90c1c30873 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#签名")]),s._v("\nStatus: Downloaded newer image "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" mysql:latest\ndocker.io/library/mysql:latest  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#下载来源的真实地址  #docker pull mysql等价于docker pull docker.io/library/mysql:latest")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#指定版本下载")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker pull mysql:5.7")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.7")]),s._v(": Pulling from library/mysql\n72a69066d2fe: Already exists \n93619dbc5b36: Already exists \n99da31dd6142: Already exists \n626033c43d70: Already exists \n37d5d7efb64e: Already exists \nac563158d721: Already exists \nd2ba16033dad: Already exists \n0ceb82207cd7: Pull complete \n37f2405cae96: Pull complete \ne2482e017e53: Pull complete \n70deed891d42: Pull complete \nDigest: sha256:f2ad209efe9c67104167fc609cca6973c8422939491c9345270175a300419f94\nStatus: Downloaded newer image "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" mysql:5.7\ndocker.io/library/mysql:5.7\n")])])]),t("p",[t("strong",[s._v("docker rmi")]),s._v(" 删除镜像")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker images")]),s._v("\nREPOSITORY    TAG       IMAGE ID       CREATED         SIZE\nmysql         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.7")]),s._v("       c20987f18b13   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" months ago    448MB\nmysql         latest    3218b38490ce   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" months ago    516MB\nhello-world   latest    feb5d9fea6a5   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" months ago   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(".3kB\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1.删除指定的镜像id")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker rmi -f c20987f18b13")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2.删除多个镜像id")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker rmi -f 镜像id 镜像id")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3.删除全部的镜像id")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker rmi -f $(docker images -aq)")]),s._v("\n")])])]),t("h3",{attrs:{id:"容器命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#容器命令"}},[s._v("#")]),s._v(" 容器命令")]),s._v(" "),t("p",[s._v("有了镜像才可以创建容器，linux，下载一个 centos 镜像来测试")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker pull centos")]),s._v("\nUsing default tag: latest\nlatest: Pulling from library/centos\na1d0c7532777: Pull complete \nDigest: sha256:a27fd8080b517143cbbbab9dfb7c8571c40d67d534bbdee55bd6c473f432b177\nStatus: Downloaded newer image "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" centos:latest\ndocker.io/library/centos:latest\n")])])]),t("p",[t("strong",[s._v("启动并进入容器centos")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("可选参数"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" image\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#参数说明")]),s._v("\n--name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Name"')]),s._v("           指定容器名字\n-d                     后台方式运行\n-it                    使用交互方式运行,进入容器查看内容\n-p                     指定容器的端口\n    -p ip:主机端口:容器端口  配置主机端口映射到容器端口\n    -p 主机端口:容器端口 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("常用"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    -p 容器端口\n-P                     随机指定端口"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("大写的P"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -it centos /bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@2da28ff98a79 /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nbin  etc   lib\t  lost+found  mnt  proc  run   srv  tmp  var\ndev  home  lib64  media       opt  root  sbin  sys  usr\n")])])]),t("p",[t("strong",[s._v("退出容器")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#exit 停止并退出容器（后台方式运行则仅退出）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Ctrl+P+Q  不停止容器退出")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@2da28ff98a79 /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# exit")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n")])])]),t("p",[t("strong",[s._v("列出运行过的容器命令")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#docker ps ")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出当前正在运行的容器")]),s._v("\n-a   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出所有容器的运行记录")]),s._v("\n-n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("? "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示最近创建的n个容器")]),s._v("\n-q   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只显示容器的编号")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps")]),s._v("\nCONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps -a")]),s._v("\nCONTAINER ID   IMAGE          COMMAND       CREATED         STATUS                      PORTS     NAMES\n2da28ff98a79   centos         "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" minutes ago   Exited "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("43")]),s._v(" seconds ago             dreamy_tereshkova\nbfcae6760fd7   feb5d9fea6a5   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/hello"')]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" hours ago    Exited "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" hours ago               silly_lamport\n")])])]),t("p",[t("strong",[s._v("删除容器命令")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" 容器id                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除指定的容器,不能删除正在运行的容器,强制删除使用 rm -f")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -f "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -aq"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除所有的容器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -a -q"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("xargs")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除所有的容器")]),s._v("\n")])])]),t("p",[t("strong",[s._v("启动和停止容器命令")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" start 容器id          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动容器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" restart 容器id        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重启容器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" stop 容器id           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#停止当前运行的容器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" 容器id           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#强制停止当前容器")]),s._v("\n")])])]),t("h3",{attrs:{id:"常用其他命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用其他命令"}},[s._v("#")]),s._v(" 常用其他命令")]),s._v(" "),t("p",[t("strong",[s._v("后台启动容器")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -d 镜像名")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -d centos")]),s._v("\n94486234de69d39323637b4dee9644ef020584a1bd6724711dd76a611833443b\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 问题docker ps，发现centos停止了")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 常见的坑，docker 容器使用后台运行，就必须要有一个前台进程，docker发现没有应用，就会自动停止")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nginx，容器启动后，发现自己没有提供服务，就会立刻停止，就是没有程序了")]),s._v("\n")])])]),t("p",[t("strong",[s._v("查看日志")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker logs --help")]),s._v("\n\nUsage:  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" logs "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OPTIONS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" CONTAINER\n\nFetch the logs of a container\n\nOptions:\n      --details        Show extra details provided to logs\n  -f, --follow         Follow log output\n      --since string   Show logs since timestamp "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e.g. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2013")]),s._v("-01-02T13:23:37Z"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                       or relative "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e.g. 42m "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v(" minutes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  -n, --tail string    Number of lines to show from the end of the logs\n                       "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"all"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  -t, --timestamps     Show timestamps\n      --until string   Show logs before a timestamp "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e.g.\n                       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2013")]),s._v("-01-02T13:23:37Z"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" or relative "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e.g. 42m "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v("\n                       minutes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                       \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 常用：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" logs -tf 容器id\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" logs --tail number 容器id "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#num为要显示的日志条数                 ")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 写一段脚本")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# docker run -d centos /bin/sh -c "while true;do echo hello LiAng;sleep 1;done"')]),s._v("\nf2094529df58b3b7e6430755804af585953301e4727d8a50708ed09191bd36d4\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps")]),s._v("\nCONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS     NAMES\nf2094529df58   centos    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/sh -c \'while t…"')]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" seconds ago   Up "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v(" seconds             beautiful_chandrasekhar\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示日志")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker logs -tf --tail 10 f2094529df58")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-08-22T10:15:00.205909998Z hello LiAng\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-08-22T10:15:01.210752466Z hello LiAng\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-08-22T10:15:02.216652316Z hello LiAng\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-08-22T10:15:03.220693298Z hello LiAng\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-08-22T10:15:04.224790923Z hello LiAng\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-08-22T10:15:05.227797371Z hello LiAng\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-08-22T10:15:06.230381579Z hello LiAng\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-08-22T10:15:07.235376347Z hello LiAng\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-08-22T10:15:08.237936467Z hello LiAng\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-08-22T10:15:09.241725451Z hello LiAng\n")])])]),t("p",[t("strong",[s._v("查看容器中进程信息")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 命令 docker top 容器id")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker top f2094529df58")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("UID")]),s._v("                 PID                 "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PPID")]),s._v("                C                   STIME               TTY\nroot                "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8258")]),s._v("                "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8239")]),s._v("                "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":13               ?\nroot                "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8638")]),s._v("                "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8258")]),s._v("                "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":17               ?\n")])])]),t("p",[t("strong",[s._v("查看容器的元数据")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker inspect 容器id")]),s._v("\n")])])]),t("p",[t("strong",[s._v("进入当前正在运行的容器")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通常我们的容器都是使用后台方式来运行的，有时需要进入容器修改配置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it 容器id bashShell")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 方式一")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it f2094529df58 /bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@f2094529df58 /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nbin  etc   lib\t  lost+found  mnt  proc  run   srv  tmp  var\ndev  home  lib64  media       opt  root  sbin  sys  us\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 方式二")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker attach 容器id")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker attach f2094529df58")]),s._v("\n")])])]),t("p",[s._v("docker exec 进入容器后开启一个新的终端，可以在里面操作")]),s._v(" "),t("p",[s._v("docker attach 进入容器正在执行的终端，不会启动新的进程")]),s._v(" "),t("p",[t("strong",[s._v("拷贝操作")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#拷贝容器的文件到主机中")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" 容器id:容器内路径  目的主机路径\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#拷贝宿主机的文件到容器中")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" 目的主机路径 容器id:容器内路径\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps")]),s._v("\nCONTAINER ID   IMAGE     COMMAND       CREATED          STATUS          PORTS     NAMES\n88577802c17c   centos    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("43")]),s._v(" seconds ago   Up "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v(" seconds             vigorous_jackson\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker attach 88577802c17c")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@88577802c17c /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /home")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@88577802c17c home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# touch test.java")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@88577802c17c home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\ntest.java\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@88577802c17c home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# exit")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps -a")]),s._v("\nCONTAINER ID   IMAGE     COMMAND       CREATED              STATUS                     PORTS     NAMES\n88577802c17c   centos    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("   About a minute ago   Exited "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" seconds ago             vigorous_jackson\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker cp 88577802c17c:/home/test.java /home")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nlzw  test.java\n")])])]),t("h3",{attrs:{id:"小结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[s._v("#")]),s._v(" 小结")]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/docker/image-20220822190418106.png",alt:"image-20220822190418106"}})]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("attach    Attach to a running container  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#当前shell下attach连接指定运行镜像")]),s._v("\nbuild     Build an image from a Dockerfile  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#通过Dockerfile定制镜像")]),s._v("\ncommit    Create a new image from a container"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s changes  #提交当前容器为新的镜像\ncp    Copy files/folders from a container to a HOSTDIR or to STDOUT  #从容器中拷贝指定文件或者目录到宿主机中\ncreate    Create a new container  #创建一个新的容器，同run 但不启动容器\ndiff    Inspect changes on a container'")]),s._v("s filesystem  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看docker容器变化")]),s._v("\nevents    Get real "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v(" events from the server"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#从docker服务获取容器实时事件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v("    Run a "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" a running container"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#在已存在的容器上运行命令")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v("    Export a container's filesystem as a "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" archive  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#导出容器的内容流作为一个tar归档文件(对应import)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("history")]),s._v("    Show the "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("history")]),s._v(" of an image  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#展示一个镜像形成历史")]),s._v("\nimages    List images  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#列出系统当前镜像")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v("    Import the contents from a tarball to create a filesystem image  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#从tar包中的内容创建一个新的文件系统映像(对应export)")]),s._v("\ninfo    Display system-wide information  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#显示系统相关信息")]),s._v("\ninspect    Return low-level information on a container or image  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看容器详细信息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v("    Kill a running container  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#kill指定docker容器")]),s._v("\nload    Load an image from a "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" archive or STDIN  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#从一个tar包中加载一个镜像(对应save)")]),s._v("\nlogin    Register or log "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" to a Docker registry"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#注册或者登陆一个docker源服务器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("logout")]),s._v("    Log out from a Docker registry  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#从当前Docker registry退出")]),s._v("\nlogs    Fetch the logs of a container  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#输出当前容器日志信息")]),s._v("\npause    Pause all processes within a container"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#暂停容器")]),s._v("\nport    List port mappings or a specific mapping "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the CONTAINER  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看映射端口对应的容器内部源端口")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("    List containers  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#列出容器列表")]),s._v("\npull    Pull an image or a repository from a registry  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#从docker镜像源服务器拉取指定镜像或者库镜像")]),s._v("\npush    Push an image or a repository to a registry  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#推送指定镜像或者库镜像至docker源服务器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rename")]),s._v("    Rename a container  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重命名容器")]),s._v("\nrestart    Restart a running container  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重启运行的容器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v("    Remove one or "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" containers  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#移除一个或者多个容器")]),s._v("\nrmi    Remove one or "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" images  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#移除一个或多个镜像(无容器使用该镜像才可以删除，否则需要删除相关容器才可以继续或者-f强制删除)")]),s._v("\nrun    Run a "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" a new container  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建一个新的容器并运行一个命令")]),s._v("\nsave    Save an image"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" to a "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" archive"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#保存一个镜像为一个tar包(对应load)")]),s._v("\nsearch    Search the Docker Hub "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" images  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#在dockerhub中搜索镜像")]),s._v("\nstart    Start one or "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" stopped containers"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动容器")]),s._v("\nstats    Display a live stream of container"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" resource usage statistics  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#统计容器使用资源")]),s._v("\nstop    Stop a running container  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#停止容器")]),s._v("\ntag         Tag an image into a repository  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#给源中镜像打标签")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("top")]),s._v("       Display the running processes of a container "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看容器中运行的进程信息")]),s._v("\nunpause    Unpause all processes within a container  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#取消暂停容器")]),s._v("\nversion    Show the Docker version information"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看容器版本号")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wait")]),s._v("         Block "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("until")]),s._v(" a container stops, "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" print its "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" code  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#截取容器停止时的退出状态值")]),s._v("\n")])])]),t("h2",{attrs:{id:"docker镜像详解"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker镜像详解"}},[s._v("#")]),s._v(" Docker镜像详解")]),s._v(" "),t("h3",{attrs:{id:"镜像是什么"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#镜像是什么"}},[s._v("#")]),s._v(" 镜像是什么")]),s._v(" "),t("p",[s._v("镜像是一种轻量级、可执行的独立软件包，用来打包软件运行环境和基于运行环境开发的软件，它包含运行某个软件所需要的所有内容，包括代码，运行时（一个程序在运行或者在被执行的依赖）、库，环境变量和配置文件。")]),s._v(" "),t("h3",{attrs:{id:"docker镜像加载原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker镜像加载原理"}},[s._v("#")]),s._v(" Docker镜像加载原理")]),s._v(" "),t("p",[s._v("Docker的镜像实际上由一层一层的文件系统组成，这种层级的文件系统是UnionFS联合文件系统。")]),s._v(" "),t("p",[t("strong",[s._v("UnionFS（联合文件系统）")])]),s._v(" "),t("p",[s._v("联合文件系统（UnionFS）是一种分层、轻量级并且高性能的文件系统，它支持对文件系统的修改作为一次提交来一层层的叠加，同时可以将不同目录挂载到同一个虚拟文件系统下。联合文件系统是 Docker 镜像的基础。镜像可以通过分层来进行继承，基于基础镜像（没有父镜像），可以制作各种具体的应用镜像。")]),s._v(" "),t("p",[s._v("特性：一次同时加载多个文件系统，但从外面看起来只能看到一个文件系统。联合加载会把各层文件系统叠加起来，这样最终的文件系统会包含所有底层的文件和目录。")]),s._v(" "),t("p",[t("strong",[s._v("镜像加载原理")])]),s._v(" "),t("p",[s._v("Docker的镜像实际由一层一层的文件系统组成：")]),s._v(" "),t("p",[s._v("bootfs（boot file system）主要包含bootloader和kernel。bootloader主要是引导加载kernel，完成后整个内核就都在内存中了。此时内存的使用权已由bootfs转交给内核，系统卸载bootfs。可以被不同的Linux发行版公用。")]),s._v(" "),t("p",[s._v("rootfs（root file system），包含典型Linux系统中的/dev，/proc，/bin，/etc等标准目录和文件。rootfs就是各种不同操作系统发行版（Ubuntu，Centos等）。因为底层直接用Host的kernel，rootfs只包含最基本的命令，工具和程序就可以了。")]),s._v(" "),t("h3",{attrs:{id:"分层理解"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分层理解"}},[s._v("#")]),s._v(" 分层理解")]),s._v(" "),t("p",[s._v("所有的Docker镜像都起始于一个基础镜像层，当进行修改或增加新的内容时，就会在当前镜像层之上，创建新的容器层。")]),s._v(" "),t("p",[s._v("容器在启动时会在镜像最外层上建立一层可读写的容器层（R/W），而镜像层是只读的（R/O）。")]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/docker/image-20220822211048671.png",alt:"image-20220822211048671"}})]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker image inspect nginx:latest")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Id"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sha256:605c77e624ddb75e6110f997c58876baa13f8754486b461117934b24a9dc3a85"')]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"RepoTags"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx:latest"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"RepoDigests"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx@sha256:0d17b565c37bcbd895e9d92315a05c1c3c9a29f762b011a10c54a66cd53c9b31"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Parent"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Comment"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Created"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2021-12-29T19:28:29.892199479Z"')]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Container"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ca3e48389f7160bc9d9a892d316fcbba459344ee3679998739b1c3cd8e56f7da"')]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ContainerConfig"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hostname"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ca3e48389f71"')]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Domainname"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"User"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"AttachStdin"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"AttachStdout"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"AttachStderr"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ExposedPorts"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"80/tcp"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Tty"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OpenStdin"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"StdinOnce"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Env"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NGINX_VERSION=1.21.5"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NJS_VERSION=0.7.1"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PKG_RELEASE=1~bullseye"')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Cmd"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/sh"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-c"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"#(nop) "')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CMD ['),t("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v("nginx"),t("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v("-g"),t("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v("daemon off;"),t("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v(']"')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Image"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sha256:82941edee2f4d17c55563bb926387c3ae39fa1a99777f088bc9d3db885192209"')]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Volumes"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"WorkingDir"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Entrypoint"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/docker-entrypoint.sh"')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OnBuild"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Labels"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"maintainer"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NGINX Docker Maintainers <docker-maint@nginx.com>"')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"StopSignal"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SIGQUIT"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"DockerVersion"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"20.10.7"')]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Author"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Config"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hostname"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Domainname"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"User"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"AttachStdin"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"AttachStdout"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"AttachStderr"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ExposedPorts"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"80/tcp"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Tty"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OpenStdin"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"StdinOnce"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Env"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NGINX_VERSION=1.21.5"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NJS_VERSION=0.7.1"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PKG_RELEASE=1~bullseye"')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Cmd"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-g"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"daemon off;"')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Image"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sha256:82941edee2f4d17c55563bb926387c3ae39fa1a99777f088bc9d3db885192209"')]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Volumes"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"WorkingDir"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Entrypoint"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/docker-entrypoint.sh"')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OnBuild"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Labels"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"maintainer"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NGINX Docker Maintainers <docker-maint@nginx.com>"')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"StopSignal"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SIGQUIT"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Architecture"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"amd64"')]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Os"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"linux"')]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Size"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("141479488")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"VirtualSize"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("141479488")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GraphDriver"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Data"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"LowerDir"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/docker/overlay2/9fe36532c4ef89e370256237b29da9e21256e3dcc81b035b2af8b76d82dfd50a/diff:/var/lib/docker/overlay2/594f08c4cea02dab44191e30523376f613aeeae1774affc36334266db55c9831/diff:/var/lib/docker/overlay2/2e53c13382c6c71406cf75571935ac0ac27796916319dda47e54bf335b6b405b/diff:/var/lib/docker/overlay2/1c1c7286f6729e8d84f0e70a38c4f6e4beeb282364addd3742f73fd0ecc0360b/diff:/var/lib/docker/overlay2/8c1ada4337353740240b7969ab4193aba3388d620733245c11d7e6e438e5eecd/diff"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MergedDir"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/docker/overlay2/75c3c9d6ebc063d6e809227ead16b110db67be83925225b6cf4a086523515c1f/merged"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"UpperDir"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/docker/overlay2/75c3c9d6ebc063d6e809227ead16b110db67be83925225b6cf4a086523515c1f/diff"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"WorkDir"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/docker/overlay2/75c3c9d6ebc063d6e809227ead16b110db67be83925225b6cf4a086523515c1f/work"')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Name"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"overlay2"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"RootFS"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Type"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"layers"')]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Layers"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sha256:2edcec3590a4ec7f40cf0743c15d78fb39d8326bc029073b41ef9727da6c851f"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sha256:e379e8aedd4d72bb4c529a4ca07a4e4d230b5a1d3f7a61bc80179e8f02421ad8"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sha256:b8d6e692a25e11b0d32c5c3dd544b71b1085ddc1fddad08e68cbd7fda7f70221"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sha256:f1db227348d0a5e0b99b15a096d930d1a69db7474a1847acbc31f05e4ef8df8c"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sha256:32ce5f6a5106cc637d09a98289782edf47c32cb082dc475dd47cbf19a4f866da"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sha256:d874fd2bc83bb3322b566df739681fbd2248c58d3369cb25908d68e7ed6040a6"')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Metadata"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"LastTagTime"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0001-01-01T00:00:00Z"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:"/blog/docker/image-20220822211215347.png",alt:"image-20220822211215347"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/docker/image-20220822211323003.png",alt:"image-20220822211323003"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/docker/image-20220822211459602.png",alt:"image-20220822211459602"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/docker/image-20220822211529217.png",alt:"image-20220822211529217"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/docker/image-20220822211705743.png",alt:"image-20220822211705743"}})]),s._v(" "),t("p",[t("strong",[s._v("特点")])]),s._v(" "),t("p",[s._v("Docker镜像都是只读的，当容器启动时，一个新的可写层被加载到镜像的顶部！")]),s._v(" "),t("p",[s._v("这一层就是我们通常说的容器层，容器之下的都叫镜像层！")]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/docker/image-20220822212149767.png",alt:"image-20220822212149767"}})]),s._v(" "),t("h3",{attrs:{id:"提交镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#提交镜像"}},[s._v("#")]),s._v(" 提交镜像")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用docker commit 命令提交容器成为一个新的版本")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" commit -m"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("“提交的描述信息” -a"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"作者"')]),s._v(" 容器id 目标镜像名:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("TAG"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" \n")])])]),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动默认的tomcat")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -it -p 8080:8080 tomcat")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 由于默认的Tomcat镜像的webapps文件夹中没有任何内容，需要从webapps.dist中拷贝文件到webapps文件夹。下面自行制作镜像：就是从webapps.dist中拷贝文件到webapps文件夹下，并提交该镜像作为一个新的镜像。使得该镜像默认的webapps文件夹下就有文件。具体命令如下：")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps")]),s._v("\nCONTAINER ID   IMAGE     COMMAND             CREATED          STATUS          PORTS                                       NAMES\na7fc74a6136a   tomcat    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"catalina.sh run"')]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" seconds ago   Up "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" seconds   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:8080-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("/tcp, :::8080-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("/tcp   strange_rosalind\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it a7fc74a6136a /bin/bash")]),s._v("\n\nroot@a7fc74a6136a:/usr/local/tomcat"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd webapps")]),s._v("\n\nroot@a7fc74a6136a:/usr/local/tomcat/webapps"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\n\nroot@a7fc74a6136a:/usr/local/tomcat/webapps"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd ..")]),s._v("\n\nroot@a7fc74a6136a:/usr/local/tomcat"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nBUILDING.txt  CONTRIBUTING.md  LICENSE\tNOTICE\tREADME.md  RELEASE-NOTES  RUNNING.txt  bin  conf  lib  logs  native-jni-lib  temp  webapps  webapps.dist  work\n\nroot@a7fc74a6136a:/usr/local/tomcat"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# webapps.dist/* webapps")]),s._v("\nbash: webapps.dist/ROOT: Is a directory\n\nroot@a7fc74a6136a:/usr/local/tomcat"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cp -r webapps.dist/* webapps")]),s._v("\n\nroot@a7fc74a6136a:/usr/local/tomcat"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd webapps")]),s._v("\n\nroot@a7fc74a6136a:/usr/local/tomcat/webapps"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nROOT  docs  examples  host-manager  manager\n\nroot@a7fc74a6136a:/usr/local/tomcat/webapps"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# exit")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps")]),s._v("\nCONTAINER ID   IMAGE     COMMAND             CREATED         STATUS         PORTS                                       NAMES\na7fc74a6136a   tomcat    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"catalina.sh run"')]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" minutes ago   Up "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" minutes   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:8080-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("/tcp, :::8080-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("/tcp   strange_rosalind\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 提交镜像作为一个新的镜像")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Docker ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# docker commit -a="LiAng" -m="add webapps app" a7fc74a6136a tomcat02:1.0')]),s._v("\nsha256:9f5f1bde2bf08d0f342f20953f320bbf67f894384f159cf252574efc7611ff59\n")])])]),t("p",[t("img",{attrs:{src:"/blog/docker/image-20220822213114757.png",alt:"image-20220822213114757"}})])])}),[],!1,null,null,null);t.default=e.exports}}]);