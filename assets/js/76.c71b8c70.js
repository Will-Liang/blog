(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{474:function(t,_,e){"use strict";e.r(_);var v=e(2),r=Object(v.a)({},(function(){var t=this,_=t._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h2",{attrs:{id:"_1-小试牛刀"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-小试牛刀"}},[t._v("#")]),t._v(" 1. 小试牛刀")]),t._v(" "),_("p",[t._v("怎样扒网页呢？")]),t._v(" "),_("p",[t._v("其实就是根据URL来获取它的网页信息，虽然我们在浏览器中看到的是一幅幅优美的画面，但是其实是由浏览器解释才呈现出来的，实质它是一段HTML代码，加 JS、CSS，如果把网页比作一个人，那么HTML便是他的骨架，JS便是他的肌肉，CSS便是它的衣服。所以最重要的部分是存在于HTML中的，下面我们就写个例子来扒一个网页下来")]),t._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v('from urllib.request import urlopen\n \nresponse = urlopen("http://www.baidu.com")\nprint(response.read().decode())\n\n')])])]),_("p",[t._v("真正的程序就两行，执行如下命令查看运行结果，感受一下")]),t._v(" "),_("p",[t._v("看，这个网页的源码已经被我们扒下来了，是不是很酸爽？")]),t._v(" "),_("hr"),t._v(" "),_("h2",{attrs:{id:"_2-常见到的方法"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-常见到的方法"}},[t._v("#")]),t._v(" 2. 常见到的方法")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("requset.urlopen(url,data,timeout)")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("第一个参数url即为URL，第二个参数data是访问URL时要传送的数据，第三个timeout是设置超时时间。")])]),t._v(" "),_("li",[_("p",[t._v("第二三个参数是可以不传送的，data默认为空None，timeout默认为 socket._GLOBAL_DEFAULT_TIMEOUT")])]),t._v(" "),_("li",[_("p",[t._v("第一个参数URL是必须要传送的，在这个例子里面我们传送了百度的URL，执行urlopen方法之后，返回一个response对象，返回信息便保存在这里面。")])])])]),t._v(" "),_("li",[_("p",[t._v("response.read()")]),t._v(" "),_("ul",[_("li",[t._v("read()方法就是读取文件里的全部内容，返回bytes类型")])])]),t._v(" "),_("li",[_("p",[t._v("response.getcode()")]),t._v(" "),_("ul",[_("li",[t._v("返回 HTTP的响应码，成功返回200，4服务器页面出错，5服务器问题")])])]),t._v(" "),_("li",[_("p",[t._v("response.geturl()")]),t._v(" "),_("ul",[_("li",[t._v("返回 返回实际数据的实际URL，防止重定向问题")])])]),t._v(" "),_("li",[_("p",[t._v("response.info()")]),t._v(" "),_("ul",[_("li",[t._v("返回 服务器响应的HTTP报头")])])])]),t._v(" "),_("hr"),t._v(" "),_("h2",{attrs:{id:"_3-request对象"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-request对象"}},[t._v("#")]),t._v(" 3. Request对象")]),t._v(" "),_("p",[t._v("其实上面的urlopen参数可以传入一个request请求,它其实就是一个Request类的实例，构造时需要传入Url,Data等等的内容。比如上面的两行代码，我们可以这么改写")]),t._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v('\nfrom urllib.request import urlopen\nfrom urllib.request import Request\n\nrequest = Request("http://www.baidu.com")\nresponse = urlopen(requst)\nprint response.read().decode()\n\n')])])]),_("p",[t._v("运行结果是完全一样的，只不过中间多了一个request对象，推荐大家这么写，因为在构建请求时还需要加入好多内容，通过构建一个request，服务器响应请求得到应答，这样显得逻辑上清晰明确")]),t._v(" "),_("hr"),t._v(" "),_("h2",{attrs:{id:"_4-get-请求"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-get-请求"}},[t._v("#")]),t._v(" 4. Get 请求")]),t._v(" "),_("p",[t._v("大部分被传输到浏览器的html，images，js，css, … 都是通过GET方法发出请求的。它是获取数据的主要方法")]),t._v(" "),_("p",[t._v("例如：www.baidu.com 搜索")]),t._v(" "),_("p",[t._v("Get请求的参数都是在Url中体现的,如果有中文，需要转码，这时我们可使用")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("urllib.parse.urlencode()")])]),t._v(" "),_("li",[_("p",[t._v("urllib.parse. quote()")])])]),t._v(" "),_("h2",{attrs:{id:"_5-post-请求"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5-post-请求"}},[t._v("#")]),t._v(" 5. Post 请求")]),t._v(" "),_("p",[t._v("我们说了Request请求对象的里有data参数，它就是用在POST里的，我们要传送的数据就是这个参数data，data是一个字典，里面要匹配键值对")]),t._v(" "),_("p",[t._v("发送请求/响应header头的含义：")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("名称")]),t._v(" "),_("th",[t._v("含义")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("Accept")]),t._v(" "),_("td",[t._v("告诉服务器，客户端支持的数据类型")])]),t._v(" "),_("tr",[_("td",[t._v("Accept-Charset")]),t._v(" "),_("td",[t._v("告诉服务器，客户端采用的编码")])]),t._v(" "),_("tr",[_("td",[t._v("Accept-Encoding")]),t._v(" "),_("td",[t._v("告诉服务器，客户机支持的数据压缩格式")])]),t._v(" "),_("tr",[_("td",[t._v("Accept-Language")]),t._v(" "),_("td",[t._v("告诉服务器，客户机的语言环境")])]),t._v(" "),_("tr",[_("td",[t._v("Host")]),t._v(" "),_("td",[t._v("客户机通过这个头告诉服务器，想访问的主机名")])]),t._v(" "),_("tr",[_("td",[t._v("If-Modified-Since")]),t._v(" "),_("td",[t._v("客户机通过这个头告诉服务器，资源的缓存时间")])]),t._v(" "),_("tr",[_("td",[t._v("Referer")]),t._v(" "),_("td",[t._v("客户机通过这个头告诉服务器，它是从哪个资源来访问服务器的。（一般用于防盗链）")])]),t._v(" "),_("tr",[_("td",[t._v("User-Agent")]),t._v(" "),_("td",[t._v("客户机通过这个头告诉服务器，客户机的软件环境")])]),t._v(" "),_("tr",[_("td",[t._v("Cookie")]),t._v(" "),_("td",[t._v("客户机通过这个头告诉服务器，可以向服务器带数据")])]),t._v(" "),_("tr",[_("td",[t._v("Refresh")]),t._v(" "),_("td",[t._v("服务器通过这个头，告诉浏览器隔多长时间刷新一次")])]),t._v(" "),_("tr",[_("td",[t._v("Content-Type")]),t._v(" "),_("td",[t._v("服务器通过这个头，回送数据的类型")])]),t._v(" "),_("tr",[_("td",[t._v("Content-Language")]),t._v(" "),_("td",[t._v("服务器通过这个头，告诉服务器的语言环境")])]),t._v(" "),_("tr",[_("td",[t._v("Server")]),t._v(" "),_("td",[t._v("服务器通过这个头，告诉浏览器服务器的类型")])]),t._v(" "),_("tr",[_("td",[t._v("Content-Encoding")]),t._v(" "),_("td",[t._v("服务器通过这个头，告诉浏览器数据采用的压缩格式")])]),t._v(" "),_("tr",[_("td",[t._v("Content-Length")]),t._v(" "),_("td",[t._v("服务器通过这个头，告诉浏览器回送数据的长度")])])])]),t._v(" "),_("h2",{attrs:{id:"_6-响应的编码"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_6-响应的编码"}},[t._v("#")]),t._v(" 6. 响应的编码")]),t._v(" "),_("p",[t._v("响应状态码")]),t._v(" "),_("p",[t._v("响应状态代码有三位数字组成，第一个数字定义了响应的类别，且有五种可能取值。\n常见状态码：")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("号码")]),t._v(" "),_("th",[t._v("含义")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("100~199")]),t._v(" "),_("td",[t._v("表示服务器成功接收部分请求，要求客户端继续提交其余请求才能完成整个处理过程")])]),t._v(" "),_("tr",[_("td",[t._v("200~299")]),t._v(" "),_("td",[t._v("表示服务器成功接收请求并已完成整个处理过程。常用200（OK 请求成功）")])]),t._v(" "),_("tr",[_("td",[t._v("300~399")]),t._v(" "),_("td",[t._v("为完成请求，客户需进一步细化请求。例如：请求的资源已经移动一个新地址、常用302（所请求的页面已经临时转移至新的url）、307和304（使用缓存资源）")])]),t._v(" "),_("tr",[_("td",[t._v("400~499")]),t._v(" "),_("td",[t._v("客户端的请求有错误，常用404（服务器无法找到被请求的页面）、403（服务器拒绝访问，权限不够）")])]),t._v(" "),_("tr",[_("td",[t._v("500~599")]),t._v(" "),_("td",[t._v("服务器端出现错误，常用500（请求未完成。服务器遇到不可预知的情况）")])])])]),t._v(" "),_("h2",{attrs:{id:"_7-ajax的请求获取数据"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_7-ajax的请求获取数据"}},[t._v("#")]),t._v(" 7. Ajax的请求获取数据")]),t._v(" "),_("p",[t._v("有些网页内容使用AJAX加载，而AJAX一般返回的是JSON,直接对AJAX地址进行post或get，就返回JSON数据了")]),t._v(" "),_("h2",{attrs:{id:"_8-请求-ssl证书验证"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_8-请求-ssl证书验证"}},[t._v("#")]),t._v(" 8. 请求 SSL证书验证")]),t._v(" "),_("p",[t._v("现在随处可见 https 开头的网站，urllib可以为 HTTPS 请求验证SSL证书，就像web浏览器一样，如果网站的SSL证书是经过CA认证的，则能够正常访问，如：https://www.baidu.com/")]),t._v(" "),_("p",[t._v("如果SSL证书验证不通过，或者操作系统不信任服务器的安全证书，比如浏览器在访问12306网站如：https://www.12306.cn/mormhweb/的时候，会警告用户证书不受信任。（据说 12306 网站证书是自己做的，没有通过CA认证）")]),t._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("# 忽略SSL安全认证\ncontext = ssl._create_unverified_context()\n# 添加到context参数里\nresponse = urllib.request.urlopen(request, context = context)\n")])])])])}),[],!1,null,null,null);_.default=r.exports}}]);